#!/bin/sh

# .tools-versions: {{ include "dot_tool-versions" | sha256sum }}

. '{{ .chezmoi.homeDir }}/.asdf/lib/asdf.sh'

installed="$(asdf plugin list)"
wanted="$(cut -f1 '-d ' ~/.tool-versions)"

for plugin in $installed; do
  if [ "${wanted#*$plugin}" = "$wanted" ]; then
    asdf plugin remove $plugin
  fi
done

for plugin in $wanted; do
  if [ "${installed#*$plugin}" = "$installed" ]; then
    asdf plugin add $plugin
  fi
done

exit 0
